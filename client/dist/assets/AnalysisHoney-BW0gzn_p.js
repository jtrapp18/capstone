const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PestImpacts-BVeRkhO-.js","assets/index-CX9BIEl1.js","assets/index-CCFxYzXr.css","assets/TrendChart-B7xCCQtu.js","assets/LazyPlot-Cj2rGbN6.js","assets/TempVsHoney-BOhEtoOj.js"])))=>i.map(i=>d[i]);
import{r as c,j as e,P as b,_ as y,L as j,l as P,D as g,m as v}from"./index-CX9BIEl1.js";import{u as _,L as C}from"./LazyPlot-Cj2rGbN6.js";const E=({title:t,label:s,valueData:i,selectedSlice:h,setSelectedSlice:o})=>{const{width:l,height:x,ref:u}=_(),a=c.useRef(null);if(!s.data||!i)return e.jsx(b,{children:e.jsx("p",{children:"Loading..."})});const p=c.useCallback(r=>{if(r.points?.length){let d=r.points[0].label;!isNaN(d)&&!isNaN(parseFloat(d))&&(d=parseInt(d,10)),o({labelCol:s.label,labelFilter:d})}},[s.label,o]);c.useEffect(()=>{const r=m=>{a.current&&a.current.contains(m.target)&&!m.target.closest(".slice")&&o(null)};return document.addEventListener("click",r),()=>document.removeEventListener("click",r)},[o]);const f={labels:s.data,values:i,type:"pie",textinfo:"label+percent",hoverinfo:"label+percent+value",automargin:!0},n={title:{text:t,font:{color:"black"}},showlegend:!0,legend:{x:1,y:.5,xanchor:"left",yanchor:"middle",title:{text:s.label,font:{color:"black"}}},width:l,height:x};return e.jsx(b,{ref:a,children:e.jsx(C,{data:[f],layout:n,config:{responsive:!0},onClick:p,className:"pie-chart",chartType:"pie"})})},L=({filterLabel:t,graphData:s,pieSplit:i,selectedSlice:h,setSelectedSlice:o})=>e.jsxs("div",{children:[e.jsx("span",{children:t?"Click outside of pie to clear filter":"Click slice below to filter data"}),e.jsx("div",{className:"graph-container",children:e.jsx(E,{title:`Total Honey Production by ${i==="hiveId"?"Hive":"State"}`,label:{data:s[i],label:i},valueData:s.weight,selectedSlice:h,setSelectedSlice:o})})]}),k=c.lazy(()=>y(()=>import("./PestImpacts-BVeRkhO-.js"),__vite__mapDeps([0,1,2,3,4]))),w=c.lazy(()=>y(()=>import("./TempVsHoney-BOhEtoOj.js"),__vite__mapDeps([5,1,2,3,4]))),N=({graphData:t,label:s,filters:i})=>{const o=i.includes("user")?"hiveId":"state",[l,x]=c.useState(null),u=l?`${l.labelCol}: ${l.labelFilter}`:"";if(!t)return e.jsx(j,{});if(t.length===0)return e.jsx(j,{});if(t.weight.length===0)return e.jsx("h3",{children:"No honey pulls have been recorded"});const a=l?t[l.labelCol].map((n,r)=>n===l.labelFilter?r:-1).filter(n=>n!==-1):null,f=Object.fromEntries(["temp","weight","avg_30DayWeight","humidity","antsPresent","slugsPresent","hiveBeetlesPresent","waxMothsPresent","waspsHornetsPresent","micePresent","robberBeesPresent"].map(n=>[n,a?a.map(r=>t[n][r]):t[n]]));return e.jsxs(P,{children:[e.jsx(g,{}),e.jsxs("h2",{children:[s,u?` for ${v(u)}`:""]}),e.jsx(L,{filterLabel:u,graphData:t,pieSplit:o,selectedSlice:l,setSelectedSlice:x}),e.jsx("br",{}),e.jsx(k,{filteredData:f}),e.jsx("br",{}),e.jsx(w,{filteredData:f})]})};export{N as default};
