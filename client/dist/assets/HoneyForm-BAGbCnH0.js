import{U as b,h as j,u as w,c as f,a as n,i as B,d as C,j as t,S,E as d,B as E,F as R,e as F}from"./index-BO8aIUKG.js";import{useContext as D,useState as H}from"react";import"react-dom";const W=({initObj:a,viewHoney:u})=>{D(b);const[o,i]=H(!a),{id:h}=j(),{setHives:m}=w(),{addToKey:c,updateKey:p}=F(m,"hives",null,u),s=parseInt(h),x=a?{dateReset:a.dateReset||"",datePulled:a.datePulled||"",weight:a.weight||""}:{dateReset:"",datePulled:"",weight:""},g=a?l=>p("honey_pulls",a.id,l,s):l=>c("honey_pulls",l,s),P=f({dateReset:n().required("Date reset is required").typeError("Invalid date format"),datePulled:n().nullable().typeError("Invalid date format"),weight:B().nullable().min(0,"Weight cannot be below 0").max(200,"Weight cannot exceed 200").typeError("Weight must be a number")}),e=C({initialValues:x,validationSchema:P,onSubmit:l=>{const y={...Object.fromEntries(Object.entries(l).map(([v,r])=>[v,r===""?null:r])),hiveId:s};g(y)}});return t.jsx("div",{children:o?t.jsxs(S,{onSubmit:e.handleSubmit,children:[t.jsx("h3",{children:a?"Update Honey Pull":"Add New Honey Pull"}),t.jsxs("div",{className:"form-input",children:[t.jsx("label",{htmlFor:"dateReset",children:"Start Date"}),t.jsx("input",{type:"date",id:"dateReset",name:"dateReset",value:e.values.dateReset,onChange:e.handleChange,onBlur:e.handleBlur}),e.touched.datePulled&&e.errors.datePulled&&t.jsx(d,{children:e.errors.datePulled})]}),t.jsxs("div",{className:"form-input",children:[t.jsx("label",{htmlFor:"datePulled",children:"Date Pulled"}),t.jsx("input",{type:"date",id:"datePulled",name:"datePulled",value:e.values.datePulled,onChange:e.handleChange,onBlur:e.handleBlur}),e.touched.datePulled&&e.errors.datePulled&&t.jsx(d,{children:e.errors.datePulled})]}),t.jsxs("div",{className:"form-input",children:[t.jsx("label",{htmlFor:"weight",children:"Weight (lbs)"}),t.jsx("input",{type:"number",id:"weight",name:"weight",value:e.values.weight,onChange:e.handleChange,onBlur:e.handleBlur}),e.touched.weight&&e.errors.weight&&t.jsx(d,{children:e.errors.weight})]}),t.jsx(E,{type:"submit",children:a?"Update":"Add"})]}):t.jsx(R,{label:"Honey Pull Details",formValues:e.values,setIsEditing:i})})};export{W as default};
